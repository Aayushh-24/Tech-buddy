# Environment Variables Setup

This document explains how to set up the required environment variables for deploying TechBuddy with server-side API keys.

## Required Environment Variables

### 1. OpenRouter API Key

**Variable Name:** `OPENROUTER_API_KEY`

**Description:** Your OpenRouter API key for AI-powered features. This is required for all AI functionality including document Q&A, content generation, and chat features.

**How to get it:**
1. Go to [OpenRouter.ai](https://openrouter.ai)
2. Sign up or log in to your account
3. Navigate to the API Keys section
4. Create a new API key
5. Copy the key and add it to your environment variables

**Example:**
```
OPENROUTER_API_KEY=sk-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 2. Database URL

**Variable Name:** `DATABASE_URL`

**Description:** Connection string for your SQLite database. This is automatically generated by Prisma for local development.

**For local development:**
```
DATABASE_URL="file:./dev.db"
```

**For production:** 
You may want to use a more robust database solution. Update this based on your hosting provider.

## Optional Environment Variables

### GitHub Integration

**Variable Name:** `GITHUB_CLIENT_ID` and `GITHUB_CLIENT_SECRET`

**Description:** For GitHub OAuth integration (optional feature for future enhancements).

## Deployment Setup

### Vercel Deployment

1. **Push your code to GitHub**
   ```bash
   git add .
   git commit -m "Setup server-side API keys and usage tracking"
   git push origin main
   ```

2. **Deploy to Vercel**
   - Connect your GitHub repository to Vercel
   - Vercel will automatically detect it's a Next.js app
   - During deployment, add the environment variables in the Vercel dashboard

3. **Add Environment Variables in Vercel**
   - Go to your Vercel project dashboard
   - Navigate to Settings ‚Üí Environment Variables
   - Add the required variables:
     - `OPENROUTER_API_KEY`: Your OpenRouter API key
     - `DATABASE_URL`: Your database connection string

4. **Redeploy**
   - After adding environment variables, Vercel will automatically redeploy
   - Your application will now use server-side API keys

### Other Deployment Platforms

**Netlify:**
1. Connect your GitHub repository to Netlify
2. Go to Site settings ‚Üí Build & deploy ‚Üí Environment
3. Add the required environment variables
4. Redeploy your site

**Railway:**
1. Deploy your application to Railway
2. Go to your service ‚Üí Variables
3. Add the required environment variables
4. Railway will automatically restart with the new variables

**Docker:**
```dockerfile
# In your Dockerfile or docker-compose.yml
environment:
  - OPENROUTER_API_KEY=your_api_key_here
  - DATABASE_URL=file:./dev.db
```

## Security Considerations

### üîí Key Security

- **Never commit API keys to version control**
- **Use environment variables or secret management services**
- **Rotate your API keys periodically**
- **Monitor usage through your OpenRouter dashboard**

### üõ°Ô∏è Best Practices

1. **Use different keys for development and production**
2. **Set up usage alerts in OpenRouter**
3. **Implement rate limiting on your server**
4. **Regularly audit your API usage**

## Usage Monitoring

The application includes built-in usage tracking to help you monitor:

- **Free Tier Limits:**
  - 5 documents uploaded
  - 50 questions asked
  - 10,000 AI tokens used

- **Premium Tier Limits:**
  - 100 documents uploaded
  - 1,000 questions asked
  - 100,000 AI tokens used

You can view usage statistics in the Settings page of your application.

## Troubleshooting

### Common Issues

**1. API Key Not Working**
- Verify the key is correctly copied
- Check if the key has sufficient permissions
- Ensure the key is added to the correct environment

**2. Database Connection Issues**
- Verify your DATABASE_URL is correct
- Ensure your database file has proper permissions
- Check if Prisma migrations are properly applied

**3. Deployment Issues**
- Ensure all environment variables are set in your deployment platform
- Check build logs for any missing dependencies
- Verify your framework version compatibility

### Testing Your Setup

After deployment, test your setup:

1. **Visit your deployed application**
2. **Go to Settings ‚Üí API Status**
3. **Click "Test Connection"**
4. **Verify the connection test passes**

## Support

If you encounter any issues during setup:

1. Check the browser console for error messages
2. Verify your environment variables are correctly set
3. Review the deployment logs
4. Ensure your API key is active and has credits

## Next Steps

After successfully setting up environment variables:

1. **Test all features** (document upload, Q&A, generation)
2. **Monitor usage** through the Settings page
3. **Set up alerts** for high usage or approaching limits
4. **Consider upgrading** to premium features for higher limits

---

**Note:** This setup ensures that your users can use the application immediately without needing to configure their own API keys, providing a seamless experience while maintaining security and cost control.